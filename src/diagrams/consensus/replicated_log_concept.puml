@startuml
!include ../../style.puml

title Replicated Log Concept

' [step1 {"name":"Log Structure"}]
participant "Athens" as athens
participant "Byzantium" as byzantium  
participant "Cyrene" as cyrene

note over athens
ballot=1
==Log==
--index 1--
IncrementCounter
----
--index 2--
DecrementCounter
----
--index 3--
IncrementCounter
----
--index 4--
<empty>
----
====
end note

note over byzantium
ballot=1
==Log==
--index 1--
IncrementCounter
----
--index 2--
DecrementCounter
----
--index 3--
IncrementCounter
----
--index 4--
<empty>
----
====
end note

note over cyrene
ballot=1
==Log==
--index 1--
IncrementCounter
----
--index 2--
DecrementCounter
----
--index 3--
IncrementCounter
----
--index 4--
<empty>
----
====
end note
' [/step1]

' [step2 {"name":"Key Properties", "newPage":"true"}]
note across #lightblue
**Replicated Log Properties:**

• **Ordered Slots**: Each index holds one request
• **Consensus Per Slot**: Run separate consensus for each index
• **Same Order**: All nodes have identical logs
• **Sequential Execution**: Execute requests in index order
end note
' [/step2]

' [step3 {"name":"Multiple Requests Handling", "newPage":"true"}]
note over athens, cyrene: **How Multiple Requests Are Handled:**

note over athens: Index 1: Run consensus\nfor "IncrementCounter"
note over byzantium: Index 2: Run consensus\nfor "DecrementCounter"  
note over cyrene: Index 3: Run consensus\nfor "IncrementCounter"

note over athens, cyrene #lightgreen: Each index is independent!\nCan handle unlimited requests
' [/step3]

' [step4 {"name":"Execution Order", "newPage":"true"}]
group #LightYellow "Execution Process"
    note over athens: Execute Index 1:\nCounter = 5 + 1 = 6
    note over athens: Execute Index 2:\nCounter = 6 - 1 = 5
    note over athens: Execute Index 3:\nCounter = 5 + 1 = 6
end

note over athens, cyrene: **All nodes execute in same order**\n**Final state: Counter = 6**
' [/step4]

' [step5 {"name":"Benefits", "newPage":"true"}]
note across #lightgreen
**Benefits of Replicated Logs:**

✓ **Unlimited Requests**: No single-value limitation
✓ **Ordered Execution**: Maintains consistency
✓ **Fault Tolerance**: Consensus ensures agreement
✓ **Practical**: Foundation for real distributed systems

**This is the core of Multi-Paxos!**
end note
' [/step5]

@enduml 